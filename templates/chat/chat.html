{% extends 'chat/base.html' %}
{% load static %}

{% block chatpage %}
<div class="card-header msg_head" id="chat-header">
    <div class="d-flex bd-highlight">
        <div class="img_cont">
            <img src="{% static 'images/_D.jpg' %}" class="rounded-circle user_img">
            <span class="online_icon"></span>
        </div>
        <a href="#" class="text-danger" style="text-decoration: none;" onclick="OpenProfile()">
            <div class="user_info">
                <span>{{chat.title}}</span>
                <p class="my-0"><span id="member_count">{{member_count}}</span> Member</p>
                <p>{{messages.count}} Messages</p>
            </div>
        </a>
        <div class="video_cam">
            <span><i class="fas fa-video"></i></span>
            <span><i class="fas fa-phone"></i></span>
        </div>
    </div>
    <span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
    <div class="action_menu">
        <ul>
            <li onclick="OpenProfile()"><i class="fas fa-user-circle"></i> View profile</li>
            <li><i class="fas fa-plus"></i><a href="leave">Leave Group</a></li>
            <li><i class="fas fa-plus"></i> Add to group</li>
            <li><i class="fas fa-users"></i> Add to close friends</li>
            <li><i class="fas fa-ban"></i> Block</li>
        </ul>
    </div>
</div>
<div class="card-body msg_card_body" id="chat-body">
    {% if messages %}
    {% for i in messages %}
    {% if i.author == request.user %}
    <div class="d-flex justify-content-end mb-4">
        <div class="msg_cotainer_send">
            {{i.text}}
            <span class="msg_time_send">{{i.created_time|time}}{{i.created_time|time}}</span>
        </div>
        <div class="img_cont_msg">
            <img src="{% static 'images/31.jpg' %}" class="rounded-circle user_img_msg">
        </div>
    </div>
    {% else %}
    <div class="d-flex justify-content-start mb-4">
        <div class="img_cont_msg">
            <img src="{% static 'images/_D.jpg' %}" class="rounded-circle user_img_msg">
        </div>
        <div class="msg_cotainer">
            {{i.text}}
            <span class="msg_time">{{i.created_time|time}}</span>
        </div>
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}




    {% if msg == 'question to join' %}
    <div class="card text-white">
        <div class="p-5">
            <p>You dont joined to this group. <br>
                if you whant to join on this is group?
            </p>
            <form action="" method="post">
                {% csrf_token %}
                <button class="btn btn-primary">Yes</button>
            </form>
        </div>
    </div>
    {% endif %}
</div>
<div class="card-footer" id="chat-footer">
    <!-- <form action="" id="form-send-message" method="post"> -->
    {% csrf_token %}
    <div class="input-group">
        <div class="input-group-append">
            <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
        </div>
        <textarea name="new-message" id="new-message" class="form-control type_msg"
            placeholder="Type your message..."></textarea>
        <div id="submit_new_message" class="input-group-append">
            <span onclick="Add_new_message()" class="input-group-text send_btn"><i
                    class="fas fa-location-arrow"></i></span>
        </div>
    </div>
    <!-- </form> -->
</div>
<div id="chat-profile" style="display: none;">
    <div class="card" style="height: auto;">
        <div class="card-title">
            <button class="btn btn-primary" onclick="OpenProfile()"><svg xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24" width="30" height="30">
                    <path
                        d="M10.78 19.03a.75.75 0 0 1-1.06 0l-6.25-6.25a.75.75 0 0 1 0-1.06l6.25-6.25a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L5.81 11.5h14.44a.75.75 0 0 1 0 1.5H5.81l4.97 4.97a.75.75 0 0 1 0 1.06Z">
                    </path>
                </svg></button>
        </div>
    </div>
    <div class="row2 justify-content-center">
        <img src="{% static 'images/33.jpg' %}" class="rounded-circle" style="max-width: 300px;max-height: 300px;"
            alt="">
    </div>
    <div class="row justify-content-center">
        <div class="row">
            <div class="col">
                <div class="card p-4 text-white" style="height: auto;">
                    <p>name: {{chat.title}}</p>
                    <!-- <p>Last name: khedri</p> -->
                    <p class="text-mouted">
                        username: <input type="text" disabled placeholder="@{{chat.address}}">
                        <button class="btn btn-warning"
                            onclick="navigator.clipboard.writeText('http://127.0.0.1:8000/chat/group/{{chat.address}}')">copy</button>
                    </p>
                </div>
            </div>

        </div>
    </div>
    <div class="row justify-content-center">
    </div>
    <div class="row justify-content-center">
    </div>
</div>
{% endblock %}